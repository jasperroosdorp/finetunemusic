document.addEventListener("DOMContentLoaded",function(){var lastElementClicked;var body=document.querySelector("body");Barba.Pjax.init();Barba.Prefetch.init();Barba.Dispatcher.on("linkClicked",function(el){lastElementClicked=el});Barba.Dispatcher.on("newPageReady",function(current,prev,container){history.scrollRestoration="manual"});var FadeTransition=Barba.BaseTransition.extend({start:function(){Promise.all([this.newContainerLoading,this.fadeOut()]).then(this.fadeIn.bind(this))},fadeOut:function(){this.closeWindows();$("html#video .return-button").css({opacity:1});$("html#video .return-button").animate({opacity:0},1e3);$("html.portfolio-open .portfolio-content").animate({opacity:0},1e3);$("html.portfolio-open .portfolio-wrapper").animate({scrollTop:$(".portfolio-wrapper").scrollTop()+($(".portfolio").offset().top-$(".portfolio-wrapper").offset().top)},400);return $(this.oldContainer).animate({opacity:0},1e3).promise()},fadeIn:function(){var _this=this;var $el=$(this.newContainer);$(this.oldContainer).hide();document.body.scrollTop=0;this.updatePageID();var intro=$(".index-intro > h1").hide(),i=0;(function cycle(){intro.eq(i).fadeIn(1e3).delay(4500).fadeOut(1e3,cycle);i=++i%intro.length})();$("html#video .return-button").css({opacity:0});$("html#video .return-button").animate({opacity:1},1e3);$("html.portfolio-open .portfolio-wrapper").delay(600).animate({scrollTop:$("body").scrollTop()},400);$("html.portfolio-open .portfolio-content").animate({opacity:1},1e3);$el.css({visibility:"visible",opacity:0});$el.animate({opacity:1},1e3,function(){_this.done()})},updatePageID:function(){var newID=this.newContainer.dataset.pageid;$("html").attr("id",newID)},closeWindows:function(){$("html").removeClass("nav-unfolded")}});Barba.Pjax.getTransition=function(){return FadeTransition}});function openPortfolio(){if(!$("html").hasClass("portfolio-open"))$("html").addClass("portfolio-open");if($("html").hasClass("audio-playing music")){$("html").removeClass("portfolio-tab-1 portfolio-tab-2b");$("html").addClass("portfolio-tab-2a")}if($("html").hasClass("audio-playing voice-over")){$("html").removeClass("portfolio-tab-1 portfolio-tab-2a");$("html").addClass("portfolio-tab-2b")}}$(document).ready(function(){$(".portfolio-nav-a").on("click",function(event){$(".portfolio-wrapper").animate({scrollTop:0},300,"swing");if($(this).hasClass("tab-1")){$("html").removeClass("portfolio-tab-2a portfolio-tab-2b");$("html").addClass("portfolio-tab-1")}if($(this).hasClass("tab-2a")){$("html").removeClass("portfolio-tab-1 portfolio-tab-2b");$("html").addClass("portfolio-tab-2a")}if($(this).hasClass("tab-2b")){$("html").removeClass("portfolio-tab-1 portfolio-tab-2a");$("html").addClass("portfolio-tab-2b")}});$(".close-portfolio").on("click",function(event){$("html").removeClass("portfolio-open");$("html").addClass("portfolio-closing");setTimeout(function(){$("html").removeClass("portfolio-closing")},300);$(".portfolio-wrapper").animate({scrollTop:0},300)});$(".")});var bars=$(".music-bar .bar");var tl=(new TimelineMax).staggerTo(bars,.3,{y:-10,repeat:-1,paused:false,yoyo:true,ease:Quad.easeInOut},.25);function pause(){tl.pause();TweenMax.to(bars,.7,{y:15,ease:Quad.easeOut})}document.addEventListener("DOMContentLoaded",function(){var intro=$(".index-intro > h1").hide(),i=0;(function cycle(){intro.eq(i).fadeIn(1e3).delay(4500).fadeOut(1e3,cycle);i=++i%intro.length})()});Barba.Dispatcher.on("linkClicked",function(){$("html").addClass("barba-active")});Barba.Dispatcher.on("newPageReady",function(){cloudinary.Cloudinary.new({cloud_name:"roosdorp"}).responsive();fluidvids.init({selector:["iframe","object"],players:["www.youtube.com","player.vimeo.com"]});var tabheight=$("#tab-1").height();$("#tab-2").css("height",tabheight)});Barba.Dispatcher.on("transitionCompleted",function(current,prev,newContainer){$("html").removeClass("barba-active");$(".unfold-nav").click(function(){$("html").addClass("nav-unfolded")});$(".fold-nav").click(function(){$("html").removeClass("nav-unfolded")});$("#tab-1 .video").click(function(){var currentpath=window.location.pathname;$("nav.upper .return-button").attr("href",currentpath);$("audio").each(function(){$(this)[0].pause()});$("html").removeClass("audio-playing music voice-over")});$(window).scroll(function(){$("html").toggleClass("top-out-of-viewport",$(window).scrollTop()>100)})});